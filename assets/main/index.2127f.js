window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var u="function"==typeof __require&&__require;if(!s&&u)return u(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return i(e[c][1][t]||t)},p,p.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AnimHelper:[function(t,e,o){"use strict";cc._RF.push(e,"ece58HerjlITJr8Vn7mq8El","AnimHelper"),Object.defineProperty(o,"__esModule",{value:!0}),o.AnimHelper=void 0;var n=function(){function t(){}return t.prototype.play=function(t,e,o,n){t.targetOff(this),t.stop(),t.play(e),o&&t.once("finished",function(){cc.isValid(o)&&(cc.isValid(n)?o.apply(n):o())},this)},t}(),i=function(){function t(){}return t.playClipOnce=function(t,e,o,n,i,r){var c=this;void 0===i&&(i=0);var s="";e&&(s=e instanceof cc.AnimationClip?e.name:e);var a=function(){r&&r(),c.animationTarget.play(t,s,n,o)};i>0?setTimeout(function(){a()},1e3*i):a()},t.PlayClips=function(t,e,o){var n=this,i=-1,r=function(){++i>=o.length?e&&e():n.playClipOnce(t,o[i],t.node,r)};r()},t.animationTarget=new n,t}();o.AnimHelper=i,cc._RF.pop()},{}],ArrowScript:[function(t,e,o){"use strict";cc._RF.push(e,"5dab0eaDepAw5w94rmsL5t6","ArrowScript");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./BoardPiece"),s=t("./EventHelper"),a=t("./Events"),u=cc._decorator,p=u.ccclass,l=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return i(e,t),o=e,e.prototype.init=function(t,e,o){var n=this;void 0===o&&(o=0),this.node.angle=t,this.rigidBody.linearVelocity=e,this.firstTimeCollision=!1,this.objectFired=!1,this._bumpCount=o,setTimeout(function(){n.objectFired=!0},2e3)},e.prototype.onEndContact=function(t,e,o){if(e==this.collider)if(98==o.tag){if(!this.firstTimeCollision)return void(this.firstTimeCollision=!0);this.reflectObject(o)}else{if(99!=o.tag)return s.EventHelper.dispatchEvent(a.Events.PROJECTILE_DESTROYED,cc.game,this.bumpCount),void this.destroySelf();this.reflectObject(o)}else console.error("Unknown Collision")},e.prototype.stopObject=function(){s.EventHelper.dispatchEvent(a.Events.PROJECTILE_STOPPED,cc.game),t.prototype.stopObject.call(this)},Object.defineProperty(e.prototype,"bumpCount",{get:function(){return this._bumpCount},enumerable:!1,configurable:!0}),e.prototype.reflectObject=function(t){var e=this.rigidBody.linearVelocity;this.rigidBody.linearVelocity=cc.Vec2.ZERO;var n=t.node.getPosition().negSelf().normalizeSelf();n=cc.v2(Math.round(n.x),Math.round(n.y));var i=-this.node.angle,r=0==n.x?-1:1,c=cc.instantiate(this.node);c.scaleX=this.node.scaleX,c.scaleY=this.node.scaleY*r;var u=c.getComponent(o);u.init(i,e,this.bumpCount+1),s.EventHelper.dispatchEvent(a.Events.PROJECTILE_CHANGED,cc.game,u),c.setParent(this.node.parent),this.node.destroy()},e.prototype.destroySelf=function(){cc.isValid(this.node)&&this.node.destroy()},o=r([p],e)}(c.default));o.default=l,cc._RF.pop()},{"./BoardPiece":"BoardPiece","./EventHelper":"EventHelper","./Events":"Events"}],AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"6c750biiQhGdr5DEv5z/ZDQ","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.AudioEvents=void 0;var n,i,r,c=t("./models/PriorityQueue"),s=t("./EventHelper");(function(t){t.SOUND_MUTE="SOUND_MUTE",t.SOUND_UNMUTE="SOUND_UNMUTE",t.LOAD_LAZY_AUDIO="LOAD_LAZY_AUDIO",t.MUSIC_MUTE="MUSIC_MUTE",t.MUSIC_UNMUTE="MUSIC_UNMUTE"})(n=o.AudioEvents||(o.AudioEvents={})),function(t){t[t.Music=0]="Music",t[t.Sound=1]="Sound"}(i||(i={})),function(t){t[t.Idle=0]="Idle",t[t.Loading=1]="Loading",t[t.Playing=2]="Playing"}(r||(r={}));var a=function(){this.source=null,this.status=r.Idle,this.request=null,this.node=null},u=function(t,e){return t.requestedAt>e.requestedAt?-1:t.requestedAt<e.requestedAt?1:0},p=function(t,e){return!t.mustPlay&&e.mustPlay?-1:!e.mustPlay&&t.mustPlay?1:u(t,e)},l=function(){function t(){var t=this;this.idleChannelsCount=0,this.channels=[],this.sfxQueues=new c.default(p),this.audios={},this.soundMute=!1,this.musicMute=!1,this.appIsInForeground=!0,this.lazyLoadAudio=!0,this.eventTarget=new cc.EventTarget,cc.game.on(cc.game.EVENT_HIDE,function(){t.onAppToBackground()}),cc.game.on(cc.game.EVENT_SHOW,function(){t.onAppToForeground()})}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.loadData=function(t){this.audios=t},t.sound=function(t){this.getInstance().playSound(t)},t.music=function(t){this.getInstance().playMusic(t)},t.prototype.isSoundMute=function(){return this.soundMute},t.prototype.isMusicMute=function(){return this.musicMute},t.prototype.init=function(t,e){if(void 0===e&&(e=5),!this.musicChannel){cc.sys.localStorage.getItem("SOUND_ON")?this.soundMute=!cc.sys.localStorage.getItem("SOUND_ON"):(this.saveLocalSound(!0),this.saveLocalMusic(!0)),cc.sys.localStorage.getItem("soundsLoaded")&&this.loadLazyAudio(),this.musicChannel=new a,this.musicChannel.source=new cc.AudioSource,this.musicChannel.source.playOnLoad=!0,this.musicChannel.source.loop=!0;for(var o=0;o!=e;++o)this.createChannel();this.targetNode=t,this.tickTimer=cc.tween(this.targetNode),this.tickTimer.delay(.5).call(this.timerTickComplete.bind(this)).repeatForever(this.tickTimer).start()}},t.prototype.onGameEnd=function(){cc.sys.localStorage.getItem("soundsLoaded")||(this.loadLazyAudio(),cc.sys.localStorage.setItem("soundsLoaded",String(Number())))},t.prototype.loadLazyAudio=function(){this.lazyLoadAudio||(this.lazyLoadAudio=!0,s.EventHelper.dispatchEvent(n.LOAD_LAZY_AUDIO,this.eventTarget))},t.prototype.getEventDispatcher=function(){return this.eventTarget},t.prototype.muteAllSounds=function(){this.setSoundMute(!0),s.EventHelper.dispatchEvent(n.SOUND_MUTE,this.eventTarget,null)},t.prototype.unMuteAllSounds=function(){this.setSoundMute(!1),s.EventHelper.dispatchEvent(n.SOUND_UNMUTE,this.eventTarget,null)},t.prototype.muteAllMusic=function(){this.setMusicMute(!0),s.EventHelper.dispatchEvent(n.MUSIC_MUTE,this.eventTarget,null)},t.prototype.unMuteAllMusic=function(){this.setMusicMute(!1),s.EventHelper.dispatchEvent(n.MUSIC_UNMUTE,this.eventTarget,null)},t.prototype.playMusic=function(e,o){if(void 0===o&&(o=1),this.lazyLoadAudio){var n=this.getAudioConfig(e);if(n){var r={type:i.Music,url:n.path,maxLatency:0,mustPlay:!0,volume:o,requestedAt:Date.now(),onComplete:null,payload:null,loop:!0,id:t.requestIdentity++};this.playInChannel(this.musicChannel,r)}else console.log("Couldn't find Audio config for music "+e)}},t.prototype.stopMusic=function(){this.musicChannel.source.isPlaying&&this.musicChannel.source.stop()},t.prototype.playSound=function(e,o,n,r,c,s,a){if(void 0===o&&(o=0),void 0===n&&(n=!0),void 0===r&&(r=1),void 0===c&&(c=null),void 0===s&&(s=null),void 0===a&&(a=!1),this.lazyLoadAudio&&e&&!(e.length<1)){var u=this.getAudioConfig(e);if(u){var p=this.getIdleChannel(0==o&&n),l={type:i.Sound,url:u.path,maxLatency:o,mustPlay:n,volume:r,requestedAt:Date.now(),onComplete:c,payload:s,loop:a,id:t.requestIdentity++};p?this.playInChannel(p,l):this.sfxQueues.enqueue(l)}else console.log("Couldn't find Audio config for sound "+e)}},t.prototype.stopSound=function(t){var e=this;if(t&&!(t.length<1)){var o=this.getAudioConfig(t);o?this.channels.forEach(function(t){t.request&&t.request.url==o.path&&e.releaseChannel(t)}):console.log("Couldn't find Audio config for sound "+t)}},t.prototype.stopTickTimer=function(){this.tickTimer&&this.tickTimer.stop()},t.prototype.onAppToBackground=function(){this.appIsInForeground=!1,this.updateMusicVolumes(),this.updateSoundVolumes()},t.prototype.onAppToForeground=function(){this.appIsInForeground=!0,this.updateMusicVolumes(),this.updateSoundVolumes()},t.prototype.playInChannel=function(t,e){var o=this;this.idleChannelsCount--,t.status=r.Loading,t.request=e,cc.resources.load(e.url,cc.AudioClip,function(n,i){n||o.onAudioLoaded(i,{channel:t,request:e})})},t.prototype.onAudioLoaded=function(t,e){var o=this,n=e.channel,c=e.request;n.request&&n.request.id==c.id&&(this.fixChannelNode(n),n.status=r.Playing,n.source.clip=t,n.source.loop=c.loop,n.source.node.targetOff(this),n.source.node.once("finished",function(){console.log("AudioSource finished")},this),n.source.play(),c.type==i.Sound?(n.source.volume=this.getSoundVolume(c),setTimeout(function(){o.checkIfStillPlayingCallback(n)},.1)):n.source.volume=this.getMusicVolume(c))},t.prototype.fixChannelNode=function(t){try{t.node&&cc.isValid(t.node)||(t.node=new cc.Node,t.source&&(t.source.node=t.node)),cc.isValid(this.targetNode)&&!cc.isValid(t.node.parent)&&this.targetNode.addChild(t.node)}catch(e){}},t.prototype.checkIfStillPlayingCallback=function(t){var e=this,o=function(){t.source.isPlaying?setTimeout(function(){o()},.1):e.releaseChannel(t)};return o},t.prototype.getSoundVolume=function(t){return this.soundMute?0:t.volume},t.prototype.getMusicVolume=function(t){return this.musicMute?0:t.volume},t.prototype.releaseChannel=function(t){var e=t.request;e&&(t.status=r.Idle,t.request=null,t.source.isPlaying&&t.source.stop(),this.idleChannelsCount++,console.log("for sound "+e.url),e.onComplete&&(e.onComplete.length,e.onComplete(e.payload)))},t.prototype.timerTickComplete=function(){this.sfxQueues.size()&&(this.playOldQueuedSFX(),this.playRemainingSFX())},t.prototype.playOldQueuedSFX=function(){for(var t=Date.now();this.sfxQueues.size();){var e=this.sfxQueues.peek();if(t-e.requestedAt>=e.maxLatency){var o=this.getIdleChannel(e.mustPlay);if(o){this.playInChannel(o,e),this.sfxQueues.dequeue();continue}}break}},t.prototype.playRemainingSFX=function(){for(;this.sfxQueues.size();){var t=this.sfxQueues.peek(),e=this.getIdleChannel();if(!e){this.idleChannelsCount=0;break}this.playInChannel(e,t),this.sfxQueues.dequeue()}},t.prototype.setSoundMute=function(t){this.soundMute=t,this.saveLocalSound(!t),console.log("setting sound mute - "+t),this.updateSoundVolumes()},t.prototype.updateSoundVolumes=function(){var t=this;this.channels.forEach(function(e){e.status==r.Playing&&e.request&&e.request.type==i.Sound&&(e.source.volume=t.soundMute||!t.appIsInForeground?0:e.request.volume)})},t.prototype.setMusicMute=function(t){this.musicMute=t,this.saveLocalMusic(!t),console.log("setting music mute - "+t),this.updateMusicVolumes()},t.prototype.updateMusicVolumes=function(){this.musicChannel&&this.musicChannel.status==r.Playing&&this.musicChannel.request&&this.musicChannel.request.type==i.Music&&(this.musicChannel.source.volume=this.musicMute||!this.appIsInForeground?0:this.musicChannel.request.volume)},t.prototype.saveLocalSound=function(t){cc.sys.localStorage.setItem("SOUND_ON",t?"true":"false")},t.prototype.saveLocalMusic=function(){},t.prototype.createChannel=function(){var t=new a;return t.source=new cc.AudioSource,t.source.playOnLoad=!1,this.channels.push(t),this.idleChannelsCount++,t},t.prototype.getIdleChannel=function(t){void 0===t&&(t=!1);for(var e=0;e!=this.channels.length;++e)if(this.channels[e].status==r.Idle)return this.channels[e];return t?this.createChannel():null},t.prototype.getAudioConfig=function(t){return this.audios[t]},t.requestIdentity=0,t}();o.default=l,cc._RF.pop()},{"./EventHelper":"EventHelper","./models/PriorityQueue":"PriorityQueue"}],BoardPiece:[function(t,e,o){"use strict";cc._RF.push(e,"c9534ZXsyNAHJ2sCXcRe1r1","BoardPiece");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rigidBody=null,e.collider=null,e}return i(e,t),e.prototype.hasStopped=function(){return this.rigidBody.linearVelocity.mag()<=0},e.prototype.update=function(){this.rigidBody.linearVelocity.mag()>10||this.stopObject()},e.prototype.stopObject=function(){this.rigidBody.linearVelocity=cc.Vec2.ZERO},r([a(cc.RigidBody)],e.prototype,"rigidBody",void 0),r([a(cc.PhysicsCollider)],e.prototype,"collider",void 0),r([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],BotScript:[function(t,e,o){"use strict";cc._RF.push(e,"19603moIiVGWIqnGdSrDks0","BotScript");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./ArrowScript"),s=t("./EventHelper"),a=t("./Events"),u=t("./RandomUtils"),p=cc._decorator,l=p.ccclass,d=p.property,f=.05*cc.winSize.width,h=function(t){function e(){var e=t.call(this)||this;return e.botScore=null,e.botKills=null,e.botMovementDelay=cc.v2(1,3),e.botMovementDuration=.25,e.botMovementBounds=cc.v2(-270,270),e.arrowPrefab=null,e.arrowFireDelay=.25,e.arrowForceModifier=15,e.aimReticle=null,e.aimDuration=cc.v2(1,3),e.aimSpacingBounds=cc.v2(1,10),e.aimScalingBounds=cc.v2(1,3),e.aimAngleBounds=cc.v2(-70,70),e.bumpHit=0,e.score=0,e}return i(e,t),e.prototype.start=function(){cc.game.on(a.Events.PROJECTILE_CHANGED,this.projectileChanged,this)},e.prototype.onDestroy=function(){cc.game.off(a.Events.PROJECTILE_CHANGED,this.projectileChanged,this)},Object.defineProperty(e.prototype,"projectileListenerActive",{set:function(t){t?cc.game.on(a.Events.PROJECTILE_CHANGED,this.projectileChanged,this):cc.game.off(a.Events.PROJECTILE_CHANGED,this.projectileChanged,this)},enumerable:!1,configurable:!0}),e.prototype.attemptMove=function(){var t=this,e=u.RandomUtils.getRandomFloat(this.botMovementBounds.x,this.botMovementBounds.y);cc.tween(this.node).delay(u.RandomUtils.getRandomFloat(this.botMovementDelay.x,this.botMovementDelay.y)).to(this.botMovementDuration,{x:e},{easing:cc.easing.quartInOut}).call(function(){t.node.angle=u.RandomUtils.getRandomFloat(t.aimAngleBounds.x,t.aimAngleBounds.y);var e=cc.misc.degreesToRadians(t.node.angle);t.aimReticle.node.active=!1,t.unscheduleAllCallbacks();var o=u.RandomUtils.getRandomFloat(t.aimDuration.x,t.aimDuration.y),n=u.RandomUtils.getRandomFloat(f,100/1.5),i=t.node.angle<0?-1:1,r=cc.v2(i*Math.abs(t.node.getPosition().x+n*Math.sin(e)),-Math.abs(t.node.getPosition().y+n*Math.cos(e))),c=0,s=Math.ceil(o/.01);t.schedule(function(){var e=cc.Vec2.lerp(cc.v2(),t.node.getPosition(),r,c/s);e.mag()<f?(t.aimReticle.node.active=!1,t.adjustReticle(f)):(t.aimReticle.node.active=!0,t.adjustReticle(e.mag())),++c==s&&(t.aimReticle.node.active=!1,t.scheduleOnce(function(){return t.fireArrow(r)},t.arrowFireDelay))},.01,s-1)}).start()},e.prototype.destroyProjectile=function(){var t,e;null===(e=null===(t=this.projectile)||void 0===t?void 0:t.node)||void 0===e||e.destroy()},e.prototype.getScore=function(){return this.score},e.prototype.calcScore=function(t){var e=this;this.score+=t.getScore()+(3+this.bumpHit),this.botScore.string=this.score.toString(),setTimeout(function(){t.node.angle=180,e.botKills.addChild(t.node),t.resetPosition()},20)},e.prototype.adjustReticle=function(t){var e=(t=Math.min(t,100))/100;this.aimReticle.node.scale=e*(this.aimScalingBounds.y-this.aimScalingBounds.x)+this.aimScalingBounds.x,this.aimReticle.node.scaleY=-this.aimReticle.node.scaleY,this.aimReticle.spacingY=e*(this.aimSpacingBounds.y-this.aimSpacingBounds.x)+this.aimSpacingBounds.x},e.prototype.fireArrow=function(t){var e=cc.instantiate(this.arrowPrefab);e.x=this.aimReticle.node.x,e.y=this.aimReticle.node.y,e.scaleX=-e.scaleX,e.scaleY=-e.scaleY,this.projectile=e.getComponent(c.default),this.projectile.init(this.node.angle,t.multiplyScalar(this.arrowForceModifier)),this.bumpHit=0,this.node.angle=0,this.node.addChild(e),s.EventHelper.dispatchEvent(a.Events.PROJECTILE_FIRED,cc.game)},e.prototype.projectileChanged=function(t){this.projectile=t.getUserData()},e.prototype.projectileDestroyed=function(t){this.projectile=null,this.bumpHit=t.getUserData()},r([d(cc.Label)],e.prototype,"botScore",void 0),r([d(cc.Node)],e.prototype,"botKills",void 0),r([d(cc.Vec2)],e.prototype,"botMovementDelay",void 0),r([d],e.prototype,"botMovementDuration",void 0),r([d(cc.Vec2)],e.prototype,"botMovementBounds",void 0),r([d(cc.Prefab)],e.prototype,"arrowPrefab",void 0),r([d],e.prototype,"arrowFireDelay",void 0),r([d],e.prototype,"arrowForceModifier",void 0),r([d(cc.Layout)],e.prototype,"aimReticle",void 0),r([d(cc.Vec2)],e.prototype,"aimDuration",void 0),r([d(cc.Vec2)],e.prototype,"aimSpacingBounds",void 0),r([d(cc.Vec2)],e.prototype,"aimScalingBounds",void 0),r([d(cc.Vec2)],e.prototype,"aimAngleBounds",void 0),r([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./ArrowScript":"ArrowScript","./EventHelper":"EventHelper","./Events":"Events","./RandomUtils":"RandomUtils"}],CardCutscene:[function(t,e,o){"use strict";cc._RF.push(e,"bfce1JCdn1I/p6uzYj0+Oum","CardCutscene");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./AnimHelper"),s=cc._decorator,a=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animation=null,e.effectParticles=[],e}return i(e,t),e.prototype.init=function(t,e){this.node.addChild(t),this.effectParticles.forEach(function(t){t.spriteFrame=e})},e.prototype.start=function(){var t=this;c.AnimHelper.playClipOnce(this.animation,this.animation.defaultClip,this.node,function(){t.node.destroy()})},r([u(cc.Animation)],e.prototype,"animation",void 0),r([u([cc.Sprite])],e.prototype,"effectParticles",void 0),r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./AnimHelper":"AnimHelper"}],CardScript:[function(t,e,o){"use strict";cc._RF.push(e,"6808b2O+VZDb4DSl4/ospt0","CardScript");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./EventHelper"),s=t("./Events"),a=cc._decorator,u=a.ccclass,p=a.property,l=.05*cc.winSize.width,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardBackBG=null,e.cardSprite=null,e.cardTitle=null,e.cardDesc=null,e.scaleUpFactor=1,e.disableNodes=[],e.normalMaterial=null,e.greyMaterial=null,e}return i(e,t),e.prototype.init=function(t,e,o){this.cardType=t.powerupType,this.cardBackBG.color=t.powerupColor,this.cardSprite.spriteFrame=t.powerupHeroSprite,this.cardTitle.string=t.powerupName,this.cardDesc.string=t.powerupDesc,this.destNode=o,this.tempParent=e,this.interactionBlocked=!1,this.orgScale=this.node.scale,this.node.on(cc.Node.EventType.TOUCH_START,this.pickCard,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.moveCard,this),this.node.on(cc.Node.EventType.TOUCH_END,this.placeCard,this),this.destNode.on(s.Events.POWERUP_DISABLE,this.disableCard,this)},e.prototype.start=function(){this.parent=this.node.parent},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.pickCard,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.moveCard,this),this.node.off(cc.Node.EventType.TOUCH_END,this.placeCard,this),this.destNode.off(s.Events.POWERUP_DISABLE,this.disableCard,this)},Object.defineProperty(e.prototype,"powerupType",{get:function(){return this.cardType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableCard",{set:function(t){this.interactionBlocked=!t;var e=t?this.normalMaterial:this.greyMaterial;this.disableNodes.forEach(function(t){t.setMaterial(0,e)}),t||(this.resetCardParent(this.parent),this.setScale(this.orgScale))},enumerable:!1,configurable:!0}),e.prototype.pickCard=function(t){this.lastTouchPos=t.touch.getLocation(),this.resetCardParent(this.tempParent),this.setScale(this.scaleUpFactor),this.updateCardPos(this.lastTouchPos)},e.prototype.moveCard=function(t){var e=t.touch.getLocation();this.interactionBlocked||Math.abs(this.lastTouchPos.x-e.x)<l&&Math.abs(this.lastTouchPos.y-e.y)<l||this.updateCardPos(e)},e.prototype.placeCard=function(t){var e=this.destNode.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(t.touch.getLocation()));this.interactionBlocked||this.lastTouchPos.equals(e)||!this.isWithinBounds(e)?(this.resetCardParent(this.parent),this.setScale(this.orgScale)):this.usePowerup()},e.prototype.updateCardPos=function(t){if(this.interactionBlocked)this.resetCardParent(this.parent),this.setScale(this.orgScale);else{var e=this.node.parent.convertToNodeSpaceAR(t);this.node.setPosition(e)}},e.prototype.resetCardParent=function(t){this.node.removeFromParent(!1),this.node.setParent(t),this.node.y=0},e.prototype.isWithinBounds=function(t){var e=this.node.convertToWorldSpaceAR(this.destNode.getPosition());return t.x>=e.x-this.destNode.width/2&&t.x<=e.x+this.destNode.width/2&&t.y>=e.y-this.destNode.height/2&&t.y<=e.y+this.destNode.height/2},e.prototype.usePowerup=function(){c.EventHelper.dispatchEvent(s.Events.POWERUP_USE,cc.game,this.cardType),this.node.destroy()},e.prototype.disableCard=function(){this.enableCard=!1},e.prototype.setScale=function(t){cc.tween(this.node).to(.25,{scale:t},{easing:cc.easing.quartInOut}).start()},r([p(cc.Node)],e.prototype,"cardBackBG",void 0),r([p(cc.Sprite)],e.prototype,"cardSprite",void 0),r([p(cc.Label)],e.prototype,"cardTitle",void 0),r([p(cc.Label)],e.prototype,"cardDesc",void 0),r([p],e.prototype,"scaleUpFactor",void 0),r([p([cc.RenderComponent])],e.prototype,"disableNodes",void 0),r([p(cc.Material)],e.prototype,"normalMaterial",void 0),r([p(cc.Material)],e.prototype,"greyMaterial",void 0),r([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./EventHelper":"EventHelper","./Events":"Events"}],CoinScript:[function(t,e,o){"use strict";cc._RF.push(e,"2fadcoW1elDIJ/ZsjB2o8tW","CoinScript");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./BoardPiece"),s=cc._decorator,a=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.score=10,e.isQueen=!1,e}return i(e,t),e.prototype.start=function(){this.orgDamping=.5},e.prototype.getScore=function(){return this.score},e.prototype.resetPosition=function(){this.node.x=0,this.node.y=0},Object.defineProperty(e.prototype,"unmovable",{set:function(t){this.rigidBody.linearVelocity=cc.Vec2.ZERO,this.rigidBody.linearDamping=t?1e4:this.orgDamping},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"slippy",{set:function(t){this.rigidBody.linearVelocity=cc.Vec2.ZERO,this.rigidBody.linearDamping=t?.1:this.orgDamping},enumerable:!1,configurable:!0}),e.prototype.setVelocity=function(t){void 0===t&&(t=1);var e=this.rigidBody.linearVelocity.mag();this.rigidBody.linearVelocity.normalizeSelf(),this.rigidBody.linearVelocity.mulSelf(e*t)},e.prototype.disablePhysics=function(){var t=this;this.rigidBody.linearVelocity=cc.Vec2.ZERO,setTimeout(function(){t.rigidBody.enabled=!1,t.collider.enabled=!1},10)},r([u],e.prototype,"score",void 0),r([u],e.prototype,"isQueen",void 0),r([a],e)}(c.default);o.default=p,cc._RF.pop()},{"./BoardPiece":"BoardPiece"}],Dictionary:[function(t,e,o){"use strict";cc._RF.push(e,"04808AFk8RBvYjkr9xqIxmG","Dictionary"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./util"),i=function(){function t(t){this.table={},this.nElements=0,this.toStr=t||n.defaultToString}return t.prototype.getValue=function(t){var e=this.table["$"+this.toStr(t)];if(!n.isUndefined(e))return e.value},t.prototype.setValue=function(t,e){if(!n.isUndefined(t)&&!n.isUndefined(e)){var o,i="$"+this.toStr(t),r=this.table[i];return n.isUndefined(r)?(this.nElements++,o=void 0):o=r.value,this.table[i]={key:t,value:e},o}},t.prototype.remove=function(t){var e="$"+this.toStr(t),o=this.table[e];if(!n.isUndefined(o))return delete this.table[e],this.nElements--,o.value},t.prototype.keys=function(){var t=[];for(var e in this.table)if(n.has(this.table,e)){var o=this.table[e];t.push(o.key)}return t},t.prototype.values=function(){var t=[];for(var e in this.table)if(n.has(this.table,e)){var o=this.table[e];t.push(o.value)}return t},t.prototype.forEach=function(t){for(var e in this.table)if(n.has(this.table,e)){var o=this.table[e];if(!1===t(o.key,o.value))return}},t.prototype.containsKey=function(t){return!n.isUndefined(this.getValue(t))},t.prototype.clear=function(){this.table={},this.nElements=0},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){var t="{";return this.forEach(function(e,o){t+="\n\t"+e+" : "+o}),t+"\n}"},t}();o.default=i,cc._RF.pop()},{"./util":"util"}],EventHelper:[function(t,e,o){"use strict";cc._RF.push(e,"7d53co93oBGmKLt8rewog4n","EventHelper"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventHelper=void 0;var n=function(){function t(){}return t.dispatchEvent=function(t,e,o){var n=new cc.Event.EventCustom(t,!0);n.setUserData(o),e.dispatchEvent(n)},t}();o.EventHelper=n,cc._RF.pop()},{}],Events:[function(t,e,o){"use strict";cc._RF.push(e,"9569cFjsalCwpFifUBheXVA","Events"),Object.defineProperty(o,"__esModule",{value:!0}),o.Events=void 0,function(t){t.PROJECTILE_CHANGED="PROJECTILE_CHANGED",t.PROJECTILE_FIRED="PROJECTILE_FIRED",t.PROJECTILE_STOPPED="PROJECTILE_STOPPED",t.PROJECTILE_DESTROYED="PROJECTILE_DESTROYED",t.COIN_POCKETED="COIN_POCKETED",t.POWERUP_USE="POWERUP_USE",t.POWERUP_DISABLE="POWERUP_DISABLE"}(o.Events||(o.Events={})),cc._RF.pop()},{}],ExtAudioSource:[function(t,e,o){"use strict";cc._RF.push(e,"bd198GOv3RFkbrQkGRVhldN","ExtAudioSource");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./AudioManager"),s=cc._decorator,a=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioList=[""],e.volume=1,e.isMusic=!1,e.isLoop=!1,e.maxPlayCount=-1,e.playOnLoad=!1,e.audioIndex=0,e.playCount=0,e}return i(e,t),e.prototype.start=function(){this.playOnLoad&&this._playAudio()},e.prototype.playAudio=function(t){void 0===t&&(t=0),this.audioIndex=t,this._playAudio()},e.prototype.stopAudio=function(){var t=Math.floor(this.audioIndex);this.isMusic?c.default.getInstance().stopMusic():c.default.getInstance().stopSound(this.audioList[t])},e.prototype._playAudio=function(){if(!(this.maxPlayCount>-1&&this.playCount>=this.maxPlayCount)){this.playCount++;var t=Math.floor(this.audioIndex);this.isMusic?c.default.getInstance().playMusic(this.audioList[t]):c.default.getInstance().playSound(this.audioList[t],0,!0,this.volume,null,null,this.isLoop)}},r([u([cc.String])],e.prototype,"audioList",void 0),r([u({type:cc.Float,min:0,max:1,step:.1,slide:!0})],e.prototype,"volume",void 0),r([u],e.prototype,"isMusic",void 0),r([u],e.prototype,"isLoop",void 0),r([u({type:cc.Integer,min:-1})],e.prototype,"maxPlayCount",void 0),r([u],e.prototype,"playOnLoad",void 0),r([u({type:cc.Integer,min:0})],e.prototype,"audioIndex",void 0),r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./AudioManager":"AudioManager"}],GameOverPopup:[function(t,e,o){"use strict";cc._RF.push(e,"f1d287wcOROyY+gWIKTMII+","GameOverPopup");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.label=null,e.king=null,e.pirate=null,e.scoreLabel=null,e}return i(e,t),e.prototype.init=function(t,e,o){this.scoreLabel.string=o.toString(),e?(this.sprite.spriteFrame=this.king,this.label.string="GAME TIED"):t?(this.sprite.spriteFrame=this.king,this.label.string="YOU WON"):(this.sprite.spriteFrame=this.pirate,this.label.string="YOU LOSE")},e.prototype.onRestart=function(){cc.director.loadScene(cc.director.getScene().name)},r([a(cc.Sprite)],e.prototype,"sprite",void 0),r([a(cc.Label)],e.prototype,"label",void 0),r([a(cc.SpriteFrame)],e.prototype,"king",void 0),r([a(cc.SpriteFrame)],e.prototype,"pirate",void 0),r([a(cc.Label)],e.prototype,"scoreLabel",void 0),r([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],GameScene:[function(t,e,o){"use strict";cc._RF.push(e,"41fe2WRp6xIwYabi3UQ4qq8","GameScene");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./AudioManager"),s=t("./LoadingScreen"),a=cc._decorator,u=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioTarget=null,e.soundsJson=null,e.gameSceneNode=null,e.loadTime=3,e}return i(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.Vec2.ZERO,cc.game.addPersistRootNode(this.audioTarget),c.default.getInstance().init(this.audioTarget),c.default.getInstance().loadData(this.soundsJson.json),c.default.getInstance().unMuteAllSounds()},e.prototype.start=function(){var t=this;this.gameSceneNode.active=!1,setTimeout(function(){t.gameSceneNode.active=!0,s.default.hide()},1e3*this.loadTime)},r([p(cc.Node)],e.prototype,"audioTarget",void 0),r([p(cc.JsonAsset)],e.prototype,"soundsJson",void 0),r([p(cc.Node)],e.prototype,"gameSceneNode",void 0),r([p({type:cc.Float,min:0})],e.prototype,"loadTime",void 0),r([u],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./AudioManager":"AudioManager","./LoadingScreen":"LoadingScreen"}],GameScript:[function(t,e,o){"use strict";cc._RF.push(e,"a6ed2KxYYNLnISZ+IRxknzC","GameScript");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./BotScript"),s=t("./CardScript"),a=t("./CoinScript"),u=t("./Events"),p=t("./GameOverPopup"),l=t("./models/Set"),d=t("./PlayerScript"),f=t("./PocketScript"),h=t("./PowerupController"),y=t("./PowerupTypes"),v=t("./WallScript"),g=cc._decorator,m=g.ccclass,_=g.property,E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timePerTurn=30,e.timerBar=null,e.wallColliders=[],e.playerPocketColliders=[],e.opponentPocketColliders=[],e.player=null,e.bot=null,e.queen=null,e.minEnemyCount=0,e.enemies=[],e.maxCards=4,e.cardHolder=null,e.playerTurnNode=null,e.opponentTurnNode=null,e.gameOverPrefab=null,e.gameOverNode=null,e}return i(e,t),e.prototype.start=function(){cc.game.on(u.Events.COIN_POCKETED,this.updateScore,this),cc.game.on(u.Events.PROJECTILE_FIRED,this.onFire,this),cc.game.on(u.Events.PROJECTILE_STOPPED,this.endTurn,this),cc.game.on(u.Events.PROJECTILE_DESTROYED,this.projectileDestroyed,this),cc.game.on(u.Events.POWERUP_USE,this.onPowerupUse,this),this.playerTurn=!0,this.gameEnded=!1,this.queenPocketed=!1,this.projectileFired=!1,this.projectileActive=!1,this.activePowerups=new l.default,this.populateCards(),this.queen.unmovable=!0,this.startTurn()},e.prototype.onDestroy=function(){cc.game.off(u.Events.COIN_POCKETED,this.updateScore,this),cc.game.off(u.Events.PROJECTILE_FIRED,this.onFire,this),cc.game.off(u.Events.PROJECTILE_STOPPED,this.endTurn,this),cc.game.off(u.Events.PROJECTILE_DESTROYED,this.projectileDestroyed,this),cc.game.off(u.Events.POWERUP_USE,this.onPowerupUse,this)},e.prototype.update=function(){if(this.projectileFired&&!this.projectileActive&&this.queen.hasStopped()){for(var t=0,e=this.enemies;t<e.length;t++)if(!e[t].hasStopped())return;this.endTurn()}},e.prototype.startTurn=function(){var t=this;this.turnTime=0,this.stopTimer(),this.timerBar.progress=1,this.turnTimeout=setTimeout(function(){t.stopTimer(),t.timerBar.progress=0,t.projectileFired||t.endTurn()},1e3*this.timePerTurn),this.turnInterval=setInterval(function(){t.timerBar.progress=1-t.turnTime/t.timePerTurn,++t.turnTime},1e3),this.playerTurn?(this.playerTurnNode.active=!0,this.opponentTurnNode.active=!1,this.player.interactionAllowed=!0,this.player.projectileListenerActive=!0,this.bot.projectileListenerActive=!1,this.player.destroyProjectile(),this.togglePowerups(!0)):(this.opponentTurnNode.active=!0,this.playerTurnNode.active=!1,this.bot.attemptMove(),this.bot.projectileListenerActive=!0,this.player.projectileListenerActive=!1,this.bot.destroyProjectile(),this.powerupAction())},e.prototype.endTurn=function(){var t=this;this.projectileFired=!1,this.projectileActive=!1,this.playerTurn?(this.player.interactionAllowed=!1,this.player.destroyProjectile(),this.togglePowerups(!1)):(this.bot.destroyProjectile(),this.stopPowerupAction(),this.populateCards()),this.playerTurn=!this.playerTurn,setTimeout(function(){t.enemies.length<=t.minEnemyCount&&(t.queen.unmovable=!1)},25),this.gameEnded||this.startTurn()},e.prototype.updateScore=function(t){var e=t.getUserData();if(e.isQueen&&(this.queenPocketed=!0),this.enemies=this.enemies.filter(function(t){return t!=e}),this.playerTurn?this.player.calcScore(e):this.bot.calcScore(e),this.hasGameEnded()){this.gameEnded=!0,this.stopTimer();var o=cc.instantiate(this.gameOverPrefab);o.getComponent(p.default).init(this.player.getScore()>this.bot.getScore(),this.player.getScore()==this.bot.getScore(),this.player.getScore()),this.gameOverNode.addChild(o)}},e.prototype.onFire=function(){this.projectileFired=!0,this.projectileActive=!0,this.playerTurn&&(this.togglePowerups(!1),this.player.interactionAllowed=!1),this.stopTimer(),this.timerBar.progress=0},e.prototype.togglePowerups=function(t){t||h.default.getInstance().disableCurrentCard(),this.cardHolder.children.forEach(function(e){e.getComponent(s.default).enableCard=t})},e.prototype.projectileDestroyed=function(t){this.playerTurn?(this.projectileActive=!1,this.player.projectileDestroyed(t)):(this.projectileActive=!1,this.bot.projectileDestroyed(t))},e.prototype.onPowerupUse=function(t){this.togglePowerups(!1);var e=t.getUserData();this.activePowerups.add(e),h.default.getInstance().usePowerup(e)},e.prototype.powerupAction=function(){for(var t=0,e=this.activePowerups.toArray();t<e.length;t++){var o=e[t];switch(o){case y.PowerupTypes.HOLE_PLUG:this.opponentPocketColliders.forEach(function(t){t.allowPocketing=!1});break;case y.PowerupTypes.WALL_PCHKK:this.wallColliders.forEach(function(t){t.sticky=!0});break;case y.PowerupTypes.WALL_BOOM:this.wallColliders.forEach(function(t){t.jumpy=!0});break;case y.PowerupTypes.MO_SPEED:this.enemies.length<=this.minEnemyCount&&(this.queen.slippy=!0),this.enemies.forEach(function(t){t.slippy=!0})}h.default.getInstance().showEffect(o)}},e.prototype.stopPowerupAction=function(){for(var t=0,e=this.activePowerups.toArray();t<e.length;t++){var o=e[t];switch(o){case y.PowerupTypes.HOLE_PLUG:this.opponentPocketColliders.forEach(function(t){t.allowPocketing=!0});break;case y.PowerupTypes.WALL_PCHKK:this.wallColliders.forEach(function(t){t.sticky=!1});break;case y.PowerupTypes.WALL_BOOM:this.wallColliders.forEach(function(t){t.jumpy=!1});break;case y.PowerupTypes.MO_SPEED:this.enemies.length<=this.minEnemyCount&&(this.queen.slippy=!1),this.enemies.forEach(function(t){t.slippy=!1})}h.default.getInstance().hideEffect(o)}this.activePowerups.clear()},e.prototype.populateCards=function(){for(;this.cardHolder.childrenCount<this.maxCards;)this.cardHolder.addChild(h.default.getInstance().getNewCard())},e.prototype.hasGameEnded=function(){return this.queenPocketed&&0==this.enemies.length},e.prototype.stopTimer=function(){clearTimeout(this.turnTimeout),clearInterval(this.turnInterval)},r([_({type:cc.Integer,min:0})],e.prototype,"timePerTurn",void 0),r([_(cc.ProgressBar)],e.prototype,"timerBar",void 0),r([_([v.default])],e.prototype,"wallColliders",void 0),r([_([f.default])],e.prototype,"playerPocketColliders",void 0),r([_([f.default])],e.prototype,"opponentPocketColliders",void 0),r([_(d.default)],e.prototype,"player",void 0),r([_(c.default)],e.prototype,"bot",void 0),r([_(a.default)],e.prototype,"queen",void 0),r([_],e.prototype,"minEnemyCount",void 0),r([_(a.default)],e.prototype,"enemies",void 0),r([_],e.prototype,"maxCards",void 0),r([_(cc.Node)],e.prototype,"cardHolder",void 0),r([_(cc.Node)],e.prototype,"playerTurnNode",void 0),r([_(cc.Node)],e.prototype,"opponentTurnNode",void 0),r([_(cc.Prefab)],e.prototype,"gameOverPrefab",void 0),r([_(cc.Node)],e.prototype,"gameOverNode",void 0),r([m],e)}(cc.Component);o.default=E,cc._RF.pop()},{"./BotScript":"BotScript","./CardScript":"CardScript","./CoinScript":"CoinScript","./Events":"Events","./GameOverPopup":"GameOverPopup","./PlayerScript":"PlayerScript","./PocketScript":"PocketScript","./PowerupController":"PowerupController","./PowerupTypes":"PowerupTypes","./WallScript":"WallScript","./models/Set":"Set"}],Heap:[function(t,e,o){"use strict";cc._RF.push(e,"c74c6Hn1opKC6tPt6KiaE6z","Heap"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./util"),i=t("./arrays"),r=function(){function t(t){this.data=[],this.compare=t||n.defaultCompare}return t.prototype.leftChildIndex=function(t){return 2*t+1},t.prototype.rightChildIndex=function(t){return 2*t+2},t.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},t.prototype.minIndex=function(t,e){return e>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[e])<=0?t:e},t.prototype.siftUp=function(t){for(var e=this.parentIndex(t);t>0&&this.compare(this.data[e],this.data[t])>0;)i.swap(this.data,e,t),t=e,e=this.parentIndex(t)},t.prototype.siftDown=function(t){for(var e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t));e>=0&&this.compare(this.data[t],this.data[e])>0;)i.swap(this.data,e,t),t=e,e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t))},t.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},t.prototype.add=function(t){return!n.isUndefined(t)&&(this.data.push(t),this.siftUp(this.data.length-1),!0)},t.prototype.removeRoot=function(){if(this.data.length>0){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),t}},t.prototype.contains=function(t){var e=n.compareToEquals(this.compare);return i.contains(this.data,t,e)},t.prototype.size=function(){return this.data.length},t.prototype.isEmpty=function(){return this.data.length<=0},t.prototype.clear=function(){this.data.length=0},t.prototype.forEach=function(t){i.forEach(this.data,t)},t}();o.default=r,cc._RF.pop()},{"./arrays":"arrays","./util":"util"}],LoadingScreen:[function(t,e,o){"use strict";cc._RF.push(e,"1d84cyrtd5D7pCRvQ8ihQq7","LoadingScreen");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spinner=null,e.labelText=null,e}var o;return i(e,t),o=e,e.prototype.start=function(){o._instance=this,o.show()},e.prototype.onDestroy=function(){o._instance=null},e.show=function(t,e){void 0===t&&(t=!0),void 0===e&&(e="Loading..."),this._instance.node.active=!0,this._instance.spinner.active=t,this._instance.labelText.string=e},e.hide=function(){this._instance.node.active=!1,this._instance.spinner.active=!1,this._instance.labelText.string=""},r([a(cc.Node)],e.prototype,"spinner",void 0),r([a(cc.Label)],e.prototype,"labelText",void 0),o=r([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],PlayerScript:[function(t,e,o){"use strict";cc._RF.push(e,"8372c3Ud81JcpFM5iU0+1bi","PlayerScript");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./ArrowScript"),s=t("./EventHelper"),a=t("./Events"),u=cc._decorator,p=u.ccclass,l=u.property,d=.05*cc.winSize.width,f=function(t){function e(){var e=t.call(this)||this;return e.playerScore=null,e.playerKills=null,e.playerWall=null,e.playerMovementBounds=cc.v2(-270,270),e.arrowPrefab=null,e.arrowForceModifier=15,e.aimReticle=null,e.aimSpacingBounds=cc.v2(1,10),e.aimScalingBounds=cc.v2(1,3),e.aimAngleBounds=cc.v2(-70,70),e._interactionAllowed=!1,e.movementAllowed=!0,e.bumpHit=0,e.score=0,e}return i(e,t),e.prototype.start=function(){this.playerWall.on(cc.Node.EventType.TOUCH_START,this.movePlayer,this),this.node.on(cc.Node.EventType.TOUCH_START,this.nockArrow,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.takeAim,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.fire,this),this.node.on(cc.Node.EventType.TOUCH_END,this.fire,this),cc.game.on(a.Events.PROJECTILE_CHANGED,this.projectileChanged,this)},e.prototype.onDestroy=function(){this.playerWall.off(cc.Node.EventType.TOUCH_START,this.movePlayer,this),this.node.off(cc.Node.EventType.TOUCH_START,this.nockArrow,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.takeAim,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.fire,this),this.node.off(cc.Node.EventType.TOUCH_END,this.fire,this),cc.game.off(a.Events.PROJECTILE_CHANGED,this.projectileChanged,this)},Object.defineProperty(e.prototype,"interactionAllowed",{set:function(t){this._interactionAllowed=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"projectileListenerActive",{set:function(t){t?cc.game.on(a.Events.PROJECTILE_CHANGED,this.projectileChanged,this):cc.game.off(a.Events.PROJECTILE_CHANGED,this.projectileChanged,this)},enumerable:!1,configurable:!0}),e.prototype.destroyProjectile=function(){var t,e;null===(e=null===(t=this.projectile)||void 0===t?void 0:t.node)||void 0===e||e.destroy()},e.prototype.getScore=function(){return this.score},e.prototype.movePlayer=function(t){var e=this;if(this._interactionAllowed&&this.movementAllowed){this.movementAllowed=!1;var o=this.playerWall.convertToNodeSpaceAR(t.touch.getLocation()).clampf(cc.v2(this.playerMovementBounds.x,0),cc.v2(this.playerMovementBounds.y,0));cc.tween(this.node).to(.25,{x:o.x},{easing:cc.easing.quartInOut}).call(function(){e.movementAllowed=!0}).start()}},e.prototype.calcScore=function(t){var e=this;this.score+=t.getScore()+(3+this.bumpHit),this.playerScore.string=this.score.toString(),setTimeout(function(){t.node.angle=180,e.playerKills.addChild(t.node),t.resetPosition()},20)},e.prototype.nockArrow=function(t){this._interactionAllowed&&(this.lastTouchPos=t.touch.getLocation(),this.aimReticle.node.active=!1)},e.prototype.takeAim=function(t){if(this._interactionAllowed){var e=t.touch.getLocation(),o=e.subtract(this.lastTouchPos).mag(),n=cc.misc.radiansToDegrees(cc.Vec2.UP.negate().signAngle(e));if(o<d||e.y>0)return this.aimReticle.node.active=!1,void(this.node.angle=0);this.aimReticle.node.active=!0,this.adjustReticle(o,n)}},e.prototype.fire=function(t){if(this._interactionAllowed){var e=t.touch.getLocation();this.aimReticle.node.active=!1,e.subtract(this.lastTouchPos),e.negSelf();var o=Math.min(e.mag(),100);if(o<d||e.y<0)this.node.angle=0;else{e.normalizeSelf();var n=e.y;if(e.clampf(cc.Vec2.UP.rotateSelf(cc.misc.degreesToRadians(this.aimAngleBounds.x)),cc.Vec2.UP.rotateSelf(cc.misc.degreesToRadians(this.aimAngleBounds.y))),e.y=n,e.multiplyScalar(o),e.equals(cc.Vec2.ZERO))return console.log("No Move"),void(this.node.angle=0);this.fireArrow(e)}}},e.prototype.adjustReticle=function(t,e){var o=(t=Math.min(t,100))/100;this.node.angle=Math.min(Math.max(e,this.aimAngleBounds.x),this.aimAngleBounds.y),this.aimReticle.node.scale=o*(this.aimScalingBounds.y-this.aimScalingBounds.x)+this.aimScalingBounds.x,this.aimReticle.spacingY=o*(this.aimSpacingBounds.y-this.aimSpacingBounds.x)+this.aimSpacingBounds.x},e.prototype.fireArrow=function(t){var e=cc.instantiate(this.arrowPrefab);e.x=this.aimReticle.node.x,e.y=this.aimReticle.node.y,this.projectile=e.getComponent(c.default),this.projectile.init(this.node.angle,t.multiplyScalar(this.arrowForceModifier)),this.bumpHit=0,this.node.angle=0,this.node.addChild(e),s.EventHelper.dispatchEvent(a.Events.PROJECTILE_FIRED,cc.game)},e.prototype.projectileChanged=function(t){this.projectile=t.getUserData()},e.prototype.projectileDestroyed=function(t){this.projectile=null,this.bumpHit=t.getUserData()},r([l(cc.Label)],e.prototype,"playerScore",void 0),r([l(cc.Node)],e.prototype,"playerKills",void 0),r([l(cc.Node)],e.prototype,"playerWall",void 0),r([l(cc.Vec2)],e.prototype,"playerMovementBounds",void 0),r([l(cc.Prefab)],e.prototype,"arrowPrefab",void 0),r([l],e.prototype,"arrowForceModifier",void 0),r([l(cc.Layout)],e.prototype,"aimReticle",void 0),r([l(cc.Vec2)],e.prototype,"aimSpacingBounds",void 0),r([l(cc.Vec2)],e.prototype,"aimScalingBounds",void 0),r([l(cc.Vec2)],e.prototype,"aimAngleBounds",void 0),r([p],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./ArrowScript":"ArrowScript","./EventHelper":"EventHelper","./Events":"Events"}],PocketScript:[function(t,e,o){"use strict";cc._RF.push(e,"40f45qsSORKtJT2wiWBeNS0","PocketScript");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./CoinScript"),s=t("./EventHelper"),a=t("./Events"),u=cc._decorator,p=u.ccclass,l=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collider=null,e.shieldNode=null,e}return i(e,t),e.prototype.start=function(){this.allowPocketing=!0},e.prototype.onBeginContact=function(t,e,o){if(e==this.collider){if(this._allowPocketing&&cc.isValid(o.node)){var n=o.getComponent(c.default);n&&(n.disablePhysics(),o.node.removeFromParent(!1),s.EventHelper.dispatchEvent(a.Events.COIN_POCKETED,cc.game,n))}}else console.error("Unknown Collision")},Object.defineProperty(e.prototype,"allowPocketing",{set:function(t){this._allowPocketing=t,this.shieldNode.active=!t},enumerable:!1,configurable:!0}),r([l(cc.PhysicsCollider)],e.prototype,"collider",void 0),r([l(cc.Node)],e.prototype,"shieldNode",void 0),r([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./CoinScript":"CoinScript","./EventHelper":"EventHelper","./Events":"Events"}],PowerupController:[function(t,e,o){"use strict";cc._RF.push(e,"a95aeUjGKZLXqVV1z3s5l/Q","PowerupController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.PowerupStats=void 0;var c=t("./CardCutscene"),s=t("./CardScript"),a=t("./EventHelper"),u=t("./Events"),p=t("./models/Dictionary"),l=t("./PowerupEffect"),d=t("./PowerupTypes"),f=t("./RandomUtils"),h=cc._decorator,y=h.ccclass,v=h.property,g=function(){function t(){this.powerupType=d.PowerupTypes.FOG,this.powerupColor=cc.color(255,255,255,255),this.powerupHeroSprite=null,this.powerupEffectSprite=null,this.powerupName="",this.powerupDesc=""}return r([v({type:cc.Enum(d.PowerupTypes)})],t.prototype,"powerupType",void 0),r([v(cc.Color)],t.prototype,"powerupColor",void 0),r([v(cc.SpriteFrame)],t.prototype,"powerupHeroSprite",void 0),r([v(cc.SpriteFrame)],t.prototype,"powerupEffectSprite",void 0),r([v({type:cc.String})],t.prototype,"powerupName",void 0),r([v({type:cc.String,multiline:!0})],t.prototype,"powerupDesc",void 0),r([y("PowerupStats")],t)}();o.PowerupStats=g;var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.powerups=[],e.cardPrefab=null,e.cardCutscenePrefab=null,e.effectsPrefab=null,e.cutsceneNode=null,e.tempCardParent=null,e.cardDestination=null,e.powerupPool=Object.values(d.PowerupTypes),e.activeEffects=new p.default,e}var o;return i(e,t),o=e,e.getInstance=function(){return o._instance},e.prototype.start=function(){o._instance=this},e.prototype.getNewCard=function(){var t=f.RandomUtils.popRandomElement(this.powerupPool),e=this.fetchInfo(t);return this.createCard(e)},e.prototype.usePowerup=function(t){this.showCutscene(t),this.powerupPool.push(t)},e.prototype.showEffect=function(t){var e=cc.instantiate(this.effectsPrefab),o=e.getComponent(l.default);o.init(t),this.cutsceneNode.addChild(e),this.activeEffects.setValue(t,o)},e.prototype.hideEffect=function(t){if(this.activeEffects.containsKey(t)){var e=this.activeEffects.getValue(t);e.stopAnim(),e.node.destroy(),this.activeEffects.remove(t)}},e.prototype.disableCurrentCard=function(){a.EventHelper.dispatchEvent(u.Events.POWERUP_DISABLE,this.cardDestination)},e.prototype.createCard=function(t){var e=cc.instantiate(this.cardPrefab);return e.getComponent(s.default).init(t,this.tempCardParent,this.cardDestination),e},e.prototype.fetchInfo=function(t){for(var e=0,o=this.powerups;e<o.length;e++){var n=o[e];if(t==n.powerupType)return n}return null},e.prototype.showCutscene=function(t){var e=cc.instantiate(this.cardCutscenePrefab),o=e.getComponent(c.default),n=this.fetchInfo(t);o.init(this.createCard(n),n.powerupEffectSprite),this.cutsceneNode.addChild(e)},r([v([g])],e.prototype,"powerups",void 0),r([v(cc.Prefab)],e.prototype,"cardPrefab",void 0),r([v(cc.Prefab)],e.prototype,"cardCutscenePrefab",void 0),r([v(cc.Prefab)],e.prototype,"effectsPrefab",void 0),r([v(cc.Node)],e.prototype,"cutsceneNode",void 0),r([v(cc.Node)],e.prototype,"tempCardParent",void 0),r([v(cc.Node)],e.prototype,"cardDestination",void 0),o=r([y],e)}(cc.Component);o.default=m,cc._RF.pop()},{"./CardCutscene":"CardCutscene","./CardScript":"CardScript","./EventHelper":"EventHelper","./Events":"Events","./PowerupEffect":"PowerupEffect","./PowerupTypes":"PowerupTypes","./RandomUtils":"RandomUtils","./models/Dictionary":"Dictionary"}],PowerupEffect:[function(t,e,o){"use strict";cc._RF.push(e,"2f435wLYZFLqLd3MWCHsv1/","PowerupEffect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./AnimHelper"),s=t("./PowerupTypes"),a=cc._decorator,u=a.ccclass,p=a.property,l=function(){function t(){this.powerupType=s.PowerupTypes.FOG,this.fxNode=null}return r([p({type:cc.Enum(s.PowerupTypes)})],t.prototype,"powerupType",void 0),r([p(cc.Node)],t.prototype,"fxNode",void 0),r([u("PowerupNodeMap")],t)}(),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.powerupFX=[],e}return i(e,t),e.prototype.init=function(t){this.powerupFX.forEach(function(e){e.fxNode.active=e.powerupType==t})},e.prototype.start=function(){c.AnimHelper.playClipOnce(this.anim,this.anim.defaultClip,this.node)},e.prototype.stopAnim=function(){this.anim.stop()},r([p(cc.Animation)],e.prototype,"anim",void 0),r([p([l])],e.prototype,"powerupFX",void 0),r([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./AnimHelper":"AnimHelper","./PowerupTypes":"PowerupTypes"}],PowerupTypes:[function(t,e,o){"use strict";cc._RF.push(e,"e4eadJhFLVA55nb82RwXha2","PowerupTypes"),Object.defineProperty(o,"__esModule",{value:!0}),o.PowerupTypes=void 0,function(t){t[t.FOG=0]="FOG",t[t.MO_SPEED=1]="MO_SPEED",t[t.WALL_BOOM=2]="WALL_BOOM",t[t.WALL_PCHKK=3]="WALL_PCHKK",t[t.HOLE_PLUG=4]="HOLE_PLUG"}(o.PowerupTypes||(o.PowerupTypes={})),cc._RF.pop()},{}],PriorityQueue:[function(t,e,o){"use strict";cc._RF.push(e,"8243anzYd9Ji4azdC+6/avZ","PriorityQueue"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./util"),i=t("./Heap"),r=function(){function t(t){this.heap=new i.default(n.reverseCompareFunction(t))}return t.prototype.enqueue=function(t){return this.heap.add(t)},t.prototype.add=function(t){return this.heap.add(t)},t.prototype.dequeue=function(){if(0!==this.heap.size()){var t=this.heap.peek();return this.heap.removeRoot(),t}},t.prototype.peek=function(){return this.heap.peek()},t.prototype.contains=function(t){return this.heap.contains(t)},t.prototype.isEmpty=function(){return this.heap.isEmpty()},t.prototype.size=function(){return this.heap.size()},t.prototype.clear=function(){this.heap.clear()},t.prototype.forEach=function(t){this.heap.forEach(t)},t}();o.default=r,cc._RF.pop()},{"./Heap":"Heap","./util":"util"}],RandomUtils:[function(t,e,o){"use strict";cc._RF.push(e,"52906JLHBBOvK0kbWeFKg6i","RandomUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.RandomUtils=void 0;var n=t("./models/random"),i=t("./models/Set"),r=function(){function t(){}return t.getRandom=function(t,e,o){if(null==o){var n=Math.random()*(e+1-t);return Math.floor(t+n)}for(var r=new i.default,c=t;c<e+1;c++)o.contains(c)||r.add(c);if(r.size()>0){var s=Math.random()*(e+1-o.size()-t);return r.toArray()[Math.floor(t+s)-1]}return-1},t.getRandomFloat=function(t,e){return t+Math.random()*(e+1-t)},t.setSeed=function(e){var o=Date.now()%(1<<31);return console.log(t.TAG+" - Will set seed: ",o),e.seed(o)},t.isHeads=function(t,e){void 0===t&&(t=.5),e||(e=c);var o=Math.round(t*s);return n.Random.integer(1,s)(e)<=o},t.getRandomInt=function(t,e,o){return o||(o=c),n.Random.integer(t,e)(o)},t.getRandomElement=function(e,o){return e&&0!=e.length?e[t.getRandomInt(0,e.length-1,o)]:null},t.popRandomElement=function(e,o){if(!e||0==e.length)return null;var n=t.getRandomInt(0,e.length-1,o),i=e[n];return e.splice(n,1),i},t.TAG="RandomUtils",t}();o.RandomUtils=r;var c=r.setSeed(n.Random.engines.mt19937()),s=1e3;cc._RF.pop()},{"./models/Set":"Set","./models/random":"random"}],Set:[function(t,e,o){"use strict";cc._RF.push(e,"e53c3ok3YpBZobKmPeNvBPl","Set"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./util"),i=t("./arrays"),r=t("./Dictionary"),c=function(){function t(t){this.dictionary=new r.default(t)}return t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.add=function(t){return!this.contains(t)&&!n.isUndefined(t)&&(this.dictionary.setValue(t,t),!0)},t.prototype.intersection=function(t){var e=this;this.forEach(function(o){return t.contains(o)||e.remove(o),!0})},t.prototype.union=function(t){var e=this;t.forEach(function(t){return e.add(t),!0})},t.prototype.difference=function(t){var e=this;t.forEach(function(t){return e.remove(t),!0})},t.prototype.isSubsetOf=function(t){if(this.size()>t.size())return!1;var e=!0;return this.forEach(function(o){return!!t.contains(o)||(e=!1,!1)}),e},t.prototype.remove=function(t){return!!this.contains(t)&&(this.dictionary.remove(t),!0)},t.prototype.forEach=function(t){this.dictionary.forEach(function(e,o){return t(o)})},t.prototype.toArray=function(){return this.dictionary.values()},t.prototype.isEmpty=function(){return this.dictionary.isEmpty()},t.prototype.size=function(){return this.dictionary.size()},t.prototype.clear=function(){this.dictionary.clear()},t.prototype.toString=function(){return i.toString(this.toArray())},t}();o.default=c,cc._RF.pop()},{"./Dictionary":"Dictionary","./arrays":"arrays","./util":"util"}],WallScript:[function(t,e,o){"use strict";cc._RF.push(e,"6cfd7p9xRNPzoUrOBTegDbM","WallScript");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./CoinScript"),s=cc._decorator,a=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collider=null,e}return i(e,t),e.prototype.start=function(){this.isSticky=!1,this.orgElasticity=this.collider.restitution},Object.defineProperty(e.prototype,"sticky",{set:function(t){this.isSticky=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"jumpy",{set:function(t){this.isJumpy=t},enumerable:!1,configurable:!0}),e.prototype.onBeginContact=function(t,e,o){if(e==this.collider){var n=o.getComponent(c.default);this.isSticky&&n?(n.unmovable=!0,n.unmovable=!1):this.isJumpy&&n&&n.setVelocity(2)}else console.error("Unknown Collision")},r([u(cc.PhysicsBoxCollider)],e.prototype,"collider",void 0),r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./CoinScript":"CoinScript"}],arrays:[function(t,e,o){"use strict";cc._RF.push(e,"0e210vL589PE6w5ViJlFpOA","arrays"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./util");function i(t,e,o){for(var i=o||n.defaultEquals,r=t.length,c=0;c<r;c++)if(i(t[c],e))return c;return-1}o.indexOf=i,o.lastIndexOf=function(t,e,o){for(var i=o||n.defaultEquals,r=t.length-1;r>=0;r--)if(i(t[r],e))return r;return-1},o.contains=function(t,e,o){return i(t,e,o)>=0},o.remove=function(t,e,o){var n=i(t,e,o);return!(n<0||(t.splice(n,1),0))},o.frequency=function(t,e,o){for(var i=o||n.defaultEquals,r=t.length,c=0,s=0;s<r;s++)i(t[s],e)&&c++;return c},o.equals=function(t,e,o){var i=o||n.defaultEquals;if(t.length!==e.length)return!1;for(var r=t.length,c=0;c<r;c++)if(!i(t[c],e[c]))return!1;return!0},o.copy=function(t){return t.concat()},o.swap=function(t,e,o){if(e<0||e>=t.length||o<0||o>=t.length)return!1;var n=t[e];return t[e]=t[o],t[o]=n,!0},o.toString=function(t){return"["+t.toString()+"]"},o.forEach=function(t,e){for(var o=0,n=t;o<n.length;o++)if(!1===e(n[o]))return},cc._RF.pop()},{"./util":"util"}],random:[function(t,e){"use strict";cc._RF.push(e,"ac2dcYXmjxFKY7VI5QI+Mm/","random"),function(){var o="function"!=typeof Math.imul||-5!==Math.imul(4294967295,5)?function(t,e){var o=65535&t,n=65535&e;return o*n+((t>>>16&65535)*n+o*(e>>>16&65535)<<16>>>0)|0}:Math.imul,n="function"==typeof String.prototype.repeat&&"xxx"==="x".repeat(3)?function(t,e){return t.repeat(e)}:function(t,e){for(var o="";e>0;)1&e&&(o+=t),e>>=1,t+=t;return o};function i(t){if(!(this instanceof i))return new i(t);if(null==t)t=i.engines.nativeMath;else if("function"!=typeof t)throw new TypeError("Expected engine to be a function, got "+typeof t);this.engine=t}var r,c,s=i.prototype;function a(t){return function(){return t}}function u(t,e){return 0===e?t:function(o){return t(o)+e}}function p(t){var e=+t;return e<0?Math.ceil(e):Math.floor(e)}function l(t,e){return t<0?Math.max(t+e,0):Math.min(t,e)}function d(){}i.engines={nativeMath:function(){return 4294967296*Math.random()|0},mt19937:function(t){function e(t){for(var e=0,o=0;(0|e)<227;e=e+1|0)o=2147483648&t[e]|2147483647&t[e+1|0],t[e]=t[e+397|0]^o>>>1^(1&o?2567483615:0);for(;(0|e)<623;e=e+1|0)o=2147483648&t[e]|2147483647&t[e+1|0],t[e]=t[e-227|0]^o>>>1^(1&o?2567483615:0);o=2147483648&t[623]|2147483647&t[0],t[623]=t[396]^o>>>1^(1&o?2567483615:0)}function n(t){return t^=t>>>11,t^=t<<7&2636928640,(t^=t<<15&4022730752)^t>>>18}function r(t,e){for(var n=1,i=0,r=e.length,c=0|Math.max(r,624),s=0|t[0];(0|c)>0;--c)t[n]=s=(t[n]^o(s^s>>>30,1664525))+(0|e[i])+(0|i)|0,++i,(0|(n=n+1|0))>623&&(t[0]=t[623],n=1),i>=r&&(i=0);for(c=623;(0|c)>0;--c)t[n]=s=(t[n]^o(s^s>>>30,1566083941))-n|0,(0|(n=n+1|0))>623&&(t[0]=t[623],n=1);t[0]=2147483648}return function(){var c=new t(624),s=0,a=0;function u(){(0|s)>=624&&(e(c),s=0);var t=c[s];return s=s+1|0,a+=1,0|n(t)}return u._seed=0,u.getUseCount=function(){return a},u.discard=function(t){for(a+=t,(0|s)>=624&&(e(c),s=0);t-s>624;)t-=624-s,e(c),s=0;return s=s+t|0,u},u.seed=function(t){var e=0;u._seed=t,c[0]=e=0|t;for(var n=1;n<624;n=n+1|0)c[n]=e=o(e^e>>>30,1812433253)+n|0;return s=624,a=0,u},u.getSeed=function(){return u._seed},u.seedWithArray=function(t){return u.seed(19650218),r(c,t),u},u.autoSeed=function(){return u.seedWithArray(i.generateEntropyArray())},u}}("function"==typeof Int32Array?Int32Array:Array),browserCrypto:"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof Int32Array?(r=null,c=128,function(){return c>=128&&(null===r&&(r=new Int32Array(128)),crypto.getRandomValues(r),c=0),0|r[c++]}):null},i.generateEntropyArray=function(){for(var t=[],e=i.engines.nativeMath,o=0;o<16;++o)t[o]=0|e();return t.push(0|(new Date).getTime()),t},i.int32=function(t){return 0|t()},s.int32=function(){return i.int32(this.engine)},i.uint32=function(t){return t()>>>0},s.uint32=function(){return i.uint32(this.engine)},i.uint53=function(t){return 4294967296*(2097151&t())+(t()>>>0)},s.uint53=function(){return i.uint53(this.engine)},i.uint53Full=function(t){for(;;){var e=0|t();if(!(2097152&e))return 4294967296*(2097151&e)+(t()>>>0);if(2097152==(4194303&e)&&0==(0|t()))return 9007199254740992}},s.uint53Full=function(){return i.uint53Full(this.engine)},i.int53=function(t){var e=0|t();return 4294967296*(2097151&e)+(t()>>>0)+(2097152&e?-9007199254740992:0)},s.int53=function(){return i.int53(this.engine)},i.int53Full=function(t){for(;;){var e=0|t();if(!(4194304&e))return 4294967296*(2097151&e)+(t()>>>0)+(2097152&e?-9007199254740992:0);if(4194304==(8388607&e)&&0==(0|t()))return 9007199254740992}},s.int53Full=function(){return i.int53Full(this.engine)},i.integer=function(){function t(t){return 0==(t+1&t)}function e(t){var e=t+1,o=e*Math.floor(4294967296/e);return function(t){var n=0;do{n=t()>>>0}while(n>=o);return n%e}}function o(o){return t(o)?(n=o,function(t){return t()&n}):e(o);var n}function n(t){var e=t*Math.floor(9007199254740992/t);return function(o){var n=0;do{n=4294967296*(2097151&o())+(o()>>>0)}while(n>=e);return n%t}}function r(e){var o,i=e+1;if(0==(0|i)){var r=(i/4294967296|0)-1;if(t(r))return o=r,function(t){return 4294967296*(t()&o)+(t()>>>0)}}return n(i)}function c(t,e){return function(o){var n=0;do{var i=0|o();n=4294967296*(2097151&i)+(o()>>>0)+(2097152&i?-9007199254740992:0)}while(n<t||n>e);return n}}return function(t,e){if(t=Math.floor(t),e=Math.floor(e),t<-9007199254740992||!isFinite(t))throw new RangeError("Expected min to be at least -9007199254740992");if(e>9007199254740992||!isFinite(e))throw new RangeError("Expected max to be at most 9007199254740992");var n=e-t;return n<=0||!isFinite(n)?a(t):4294967295===n?0===t?i.uint32:u(i.int32,t+2147483648):n<4294967295?u(o(n),t):9007199254740991===n?u(i.uint53,t):n<9007199254740991?u(r(n),t):e-1-t==9007199254740991?u(i.uint53Full,t):-9007199254740992===t&&9007199254740992===e?i.int53Full:-9007199254740992===t&&9007199254740991===e?i.int53:-9007199254740991===t&&9007199254740992===e?u(i.int53,1):9007199254740992===e?u(c(t-1,e-1),1):c(t,e)}}(),s.integer=function(t,e){return i.integer(t,e)(this.engine)},i.realZeroToOneInclusive=function(t){return i.uint53Full(t)/9007199254740992},s.realZeroToOneInclusive=function(){return i.realZeroToOneInclusive(this.engine)},i.realZeroToOneExclusive=function(t){return i.uint53(t)/9007199254740992},s.realZeroToOneExclusive=function(){return i.realZeroToOneExclusive(this.engine)},i.real=function(t,e,o){if(!isFinite(t))throw new RangeError("Expected left to be a finite number");if(!isFinite(e))throw new RangeError("Expected right to be a finite number");return u((n=o?i.realZeroToOneInclusive:i.realZeroToOneExclusive,1==(r=e-t)?n:0===r?function(){return 0}:function(t){return n(t)*r}),t);var n,r},s.real=function(t,e,o){return i.real(t,e,o)(this.engine)},i.bool=function(){function t(t){return 1==(1&t())}function e(t,e){return function(o){return t(o)<e}}function o(t){if(t<=0)return a(!1);if(t>=1)return a(!0);var o=4294967296*t;return o%1==0?e(i.int32,o-2147483648|0):e(i.uint53,Math.round(9007199254740992*t))}return function(n,r){return null==r?null==n?t:o(n):n<=0?a(!1):n>=r?a(!0):e(i.integer(0,r-1),n)}}(),s.bool=function(t,e){return i.bool(t,e)(this.engine)},i.pick=function(t,e,o,n){var r=e.length,c=null==o?0:l(p(o),r),s=void 0===n?r:l(p(n),r);if(!(c>=s))return e[i.integer(c,s-1)(t)]},s.pick=function(t,e,o){return i.pick(this.engine,t,e,o)};var f,h,y,v=Array.prototype.slice;i.picker=function(t,e,o){var n=v.call(t,e,o);if(!n.length)return d;var r=i.integer(0,n.length-1);return function(t){return n[r(t)]}},i.shuffle=function(t,e,o){var n=e.length;if(n){null==o&&(o=0);for(var r=n-1>>>0;r>o;--r){var c=i.integer(0,r)(t);if(r!==c){var s=e[r];e[r]=e[c],e[c]=s}}}return e},s.shuffle=function(t){return i.shuffle(this.engine,t)},i.sample=function(t,e,o){if(o<0||o>e.length||!isFinite(o))throw new RangeError("Expected sampleSize to be within 0 and the length of the population");if(0===o)return[];var n=v.call(e),r=n.length;if(r===o)return i.shuffle(t,n,0);var c=r-o;return i.shuffle(t,n,c-1).slice(c)},s.sample=function(t,e){return i.sample(this.engine,t,e)},i.die=function(t){return i.integer(1,t)},s.die=function(t){return i.die(t)(this.engine)},i.dice=function(t,e){var o=i.die(t);return function(t){var n=[];n.length=e;for(var i=0;i<e;++i)n[i]=o(t);return n}},s.dice=function(t,e){return i.dice(t,e)(this.engine)},i.uuid4=function(){function t(t,e){return n("0",e-t.length)+t}return function(e){var o=e()>>>0,n=0|e(),i=0|e(),r=e()>>>0;return t(o.toString(16),8)+"-"+t((65535&n).toString(16),4)+"-"+t((n>>4&4095|16384).toString(16),4)+"-"+t((16383&i|32768).toString(16),4)+"-"+t((i>>4&65535).toString(16),4)+t(r.toString(16),8)}}(),s.uuid4=function(){return i.uuid4(this.engine)},i.string=function(t){null==t&&(t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-");var e=t.length;if(!e)throw new Error("Expected pool not to be an empty string");var o=i.integer(0,e-1);return function(e,n){for(var i="",r=0;r<n;++r){var c=o(e);i+=t.charAt(c)}return i}},s.string=function(t,e){return i.string(e)(this.engine,t)},i.hex=(f=i.string("0123456789abcdef"),h=i.string("0123456789abcdef".toUpperCase()),function(t){return t?h:f}),s.hex=function(t,e){return i.hex(e)(this.engine,t)},i.date=function(t,e){if(!(t instanceof Date))throw new TypeError("Expected start to be a Date, got "+typeof t);if(!(e instanceof Date))throw new TypeError("Expected end to be a Date, got "+typeof e);var o=i.integer(t.getTime(),e.getTime());return function(t){return new Date(o(t))}},s.date=function(t,e){return i.date(t,e)(this.engine)},"function"==typeof define&&define.amd?define(function(){return i}):void 0!==e&&"function"==typeof t?e.exports.Random=i:(y=(void 0).Random,i.noConflict=function(){return(void 0).Random=y,this},(void 0).Random=i)}(),cc._RF.pop()},{}],util:[function(t,e,o){"use strict";cc._RF.push(e,"66d92jH9fFHe65QKa8at2hG","util"),Object.defineProperty(o,"__esModule",{value:!0});var n=Object.prototype.hasOwnProperty;function i(t){return"function"==typeof t}function r(t){return void 0===t}function c(t){return"[object String]"===Object.prototype.toString.call(t)}o.has=function(t,e){return n.call(t,e)},o.defaultCompare=function(t,e){return t<e?-1:t===e?0:1},o.defaultEquals=function(t,e){return t===e},o.defaultToString=function(t){return null===t?"COLLECTION_NULL":r(t)?"COLLECTION_UNDEFINED":c(t)?"$s"+t:"$o"+t.toString()},o.makeString=function(t,e){if(void 0===e&&(e=","),null===t)return"COLLECTION_NULL";if(r(t))return"COLLECTION_UNDEFINED";if(c(t))return t.toString();var n="{",i=!0;for(var s in t)o.has(t,s)&&(i?i=!1:n+=e,n=n+s+":"+t[s]);return n+"}"},o.isFunction=i,o.isUndefined=r,o.isString=c,o.reverseCompareFunction=function(t){return r(t)||!i(t)?function(t,e){return t<e?1:t===e?0:-1}:function(e,o){return-1*t(e,o)}},o.compareToEquals=function(t){return function(e,o){return 0===t(e,o)}},cc._RF.pop()},{}]},{},["AnimHelper","ArrowScript","AudioManager","BoardPiece","BotScript","CardCutscene","CardScript","CoinScript","EventHelper","Events","ExtAudioSource","GameOverPopup","GameScene","GameScript","LoadingScreen","PlayerScript","PocketScript","PowerupController","PowerupEffect","PowerupTypes","RandomUtils","WallScript","Dictionary","Heap","PriorityQueue","Set","arrays","random","util"]);